# LeRobot Behavioral Cloning Training Job Template
#
# This is a STRUCTURAL TEMPLATE used by submit-azureml-lerobot-training.sh.
# Values below are placeholders and will be overridden at submission time.
#
# The script is responsible for:
# - Setting the environment (LeRobot PyTorch image)
# - Setting compute target
# - Building the command with all training parameters
# - Setting all environment variables via --set flags
#
# This file defines:
# - The job structure and schema
# - Identity configuration for Azure ML model registration
# - Output specifications
#
# To submit a job, use submit-azureml-lerobot-training.sh with appropriate flags.

$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command
display_name: LeRobot Behavioral Cloning Training
description: LeRobot imitation learning training (ACT/Diffusion) with Azure ML MLflow integration and checkpoint registration.
experiment_name: lerobot-training
identity:
  type: managed_identity

code: .
environment: azureml:lerobot-training-env:latest
compute: azureml:cpu-cluster

command: echo "Command will be set by submission script"

# All environment variables are set by submit-azureml-lerobot-training.sh via --set flags.
environment_variables:
  TRAINING_CHECKPOINT_OUTPUT: ${{outputs.checkpoints}}

outputs:
  checkpoints:
    type: uri_folder
    mode: upload
