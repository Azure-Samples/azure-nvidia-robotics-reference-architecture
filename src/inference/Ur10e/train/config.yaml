# ACT Training Configuration — direct from rosbag data
# No lerobot dataset conversion required.

# Rosbag data source
data:
  # Local directory containing rosbag recording folders.
  # Each subfolder should contain metadata.yaml + *.db3 files.
  bag_dir: "../rosbag-to-lerobot/local_bags"
  # ROS distribution for type resolution
  ros_distro: "ROS2_HUMBLE"
  # ROS topics
  joint_topic: "/joint_states"
  camera_topic: "/camera/camera/depth/image_rect_raw"
  # Target FPS for temporal synchronization
  fps: 30
  # Max temporal offset (ms) before dropping a frame
  max_offset_ms: 50.0

# Joint convention conversion (RTDE → training convention)
conventions:
  apply_joint_sign: true
  joint_sign: [1.0, -1.0, -1.0, 1.0, 1.0, 1.0]
  wrap_angles: true
  image_resize: [480, 848]   # [height, width]

# ACT model architecture
model:
  state_dim: 6
  action_dim: 6
  chunk_size: 100
  dim_model: 512
  n_heads: 8
  dim_feedforward: 3200
  n_encoder_layers: 4
  n_decoder_layers: 1
  n_vae_encoder_layers: 4
  latent_dim: 32
  dropout: 0.1
  use_vae: true
  vision_backbone: "resnet18"
  pretrained_backbone: true

# Training parameters
training:
  device: "cuda"
  seed: 1000
  batch_size: 4
  num_workers: 2
  steps: 5000
  lr: 1.0e-5
  lr_backbone: 1.0e-5
  weight_decay: 1.0e-4
  grad_clip_norm: 10.0
  kl_weight: 10.0
  log_freq: 100
  save_freq: 1000
  output_dir: "../outputs/train-rosbag-act"
  scheduler: "none"
  warmup_steps: 500
  min_lr: 1.0e-7

# Wandb experiment tracking (disabled by default for local runs)
wandb:
  enabled: false
  project: "ur10e-act-train"
  run_name: null
  tags: []
