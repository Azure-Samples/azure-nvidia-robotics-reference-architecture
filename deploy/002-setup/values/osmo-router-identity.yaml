# Azure Workload Identity configuration for OSMO router service
# Use with: helm upgrade -f osmo-router.yaml -f osmo-router-identity.yaml ...
#
# Requires:
# - AKS cluster with OIDC issuer and workload identity enabled
# - Managed identity with federated credentials for OSMO ServiceAccounts
# - Storage Blob Data Contributor role assigned to the managed identity
#
# The client-id annotation is set dynamically via --set during helm upgrade.

serviceAccount:
  annotations:
    # Client ID set via --set "serviceAccount.annotations.azure\.workload\.identity/client-id=..."
    azure.workload.identity/client-id: ""

services:
  service:
    extraPodLabels:
      azure.workload.identity/use: "true"
