# Global configuration shared across router services
global:
  osmoImageLocation: nvcr.io/nvidia/osmo
  osmoImageTag: 6.0.0

  logs:
    enabled: true
    logLevel: DEBUG
    k8sLogLevel: WARNING

# Router service configurations
services:
  # Configuration file service settings
  configFile:
    enabled: true

  postgres:
    # Settings still in use internal to osmo
    serviceName: "<replace-me>.postgres.database.azure.com"
    db: "osmo"
    user: "pgadmin"

  # Router service configuration
  service:
    scaling:
      minReplicas: 1
      maxReplicas: 2
    # webserverEnabled: true  # (Optional): Enable for UI port forwarding
    serviceAccountName: router

    # Ingress configuration
    ingress:
      prefix: /
      ingressClass: azureml-nginx  # e.g. alb, nginx
      sslEnabled: false  # Set to true if managing SSL at the ingress level
      annotations:
        # when using nginx ingress, add the following annotations to handle large OAuth2 response headers from identity providers
        nginx.ingress.kubernetes.io/proxy-buffer-size: "16k"
        nginx.ingress.kubernetes.io/proxy-buffers: "8 16k"
        nginx.ingress.kubernetes.io/proxy-busy-buffers-size: "32k"
        nginx.ingress.kubernetes.io/large-client-header-buffers: "4 16k"

    # Resource allocation - reduced for constrained system node pools
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        memory: "512Mi"

# Sidecar container configurations
sidecars:
  # Envoy proxy configuration
  envoy:
    enabled: false

    # OSMO auth service configuration
    osmoauth:
      enabled: false

  logAgent:
    enabled: false
