{
    "workload_identity": {
        "metadata": {
            "labels": {
                "azure.workload.identity/use": "true"
            }
        },
        "spec": {
            "serviceAccountName": "${WORKFLOW_SERVICE_ACCOUNT}"
        }
    },
    "default_amd64": {
        "spec": {
            "nodeSelector": {
                "kubernetes.io/arch": "amd64"
            }
        }
    },
    "default_ctrl": {
        "spec": {
            "containers": [
                {
                    "name": "osmo-ctrl",
                    "resources": {
                        "limits": {
                            "cpu": "{{USER_CPU}}",
                            "memory": "{{USER_MEMORY}}",
                            "ephemeral-storage": "{{USER_STORAGE}}"
                        },
                        "requests": {
                            "cpu": "{% if USER_CPU > 2 %}2{% else %}{{USER_CPU}}{% endif %}",
                            "memory": "1Gi",
                            "ephemeral-storage": "4Gi"
                        }
                    }
                }
            ]
        }
    },
    "default_user": {
        "spec": {
            "containers": [
                {
                    "name": "{{USER_CONTAINER_NAME}}",
                    "resources": {
                        "limits": {
                            "cpu": "{{USER_CPU}}",
                            "memory": "{{USER_MEMORY}}",
                            "nvidia.com/gpu": "{{USER_GPU}}",
                            "ephemeral-storage": "{{USER_STORAGE}}"
                        },
                        "requests": {
                            "cpu": "{{USER_CPU}}",
                            "memory": "{{USER_MEMORY}}",
                            "nvidia.com/gpu": "{{USER_GPU}}",
                            "ephemeral-storage": "{{USER_STORAGE}}"
                        }
                    }
                }
            ]
        }
    }
}
